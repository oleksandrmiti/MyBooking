<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title><%= title %> </title>
        <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/modify.css">
        <link rel="icon" href="/favicon.png" type="image/png">
        <meta name="author" content="Oleksandr Mitichkin">
    </head>
    <body>
        <div id="logo"><!--Logo-->
            <center>
                <a  href = "/"> <img src="/logo.jpg" alt= "Our logo. :)" width="200px"></a>
            </center>
        </div>

        <ul id="navigation"><!--Main nav buttons-->
            <li><a href="/booking/create">Create a new booking</a></li>
            <li><a href="/booking/delete">Delete a booking</a></li>
            <li><a href="/booking/modify">Modify a booking</a></li>
            <li><a href="/about">About Page</a></li>
            <li><a href="/help">Help Page</a></li>
        </ul>
        <h1>All Bookings</h1>
        <form id="searchForm">
            <label for="searchTerm">Search:</label>
            <input type="text" id="searchTerm" placeholder="Enter a name...">
        </form>

        <table id="bookingsTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Card Number</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <% bookings.forEach(function(booking) { %>
                <tr id="<%= booking._id %>">
                    <td><%= booking.name %></td>
                    <td><%= booking.date.toISOString().split('T')[0] %></td>
                    <td><%= booking.time %></td>
                    <td><%= booking.card %></td>
                    <td>
                        <a href="/booking/modify/<%= booking._id %>">Modify</a>
                    </td>
                </tr>
                <% }); %>
            </tbody>
        </table>
        <script>
            import 
            function searchBookings() {
                const searchTerm = document.getElementById('searchTerm').value.toLowerCase();
                const tableRows = document.getElementsByTagName('tr');
        
                for (let i = 1; i < tableRows.length; i++) {
                    const rowText = tableRows[i].innerText.toLowerCase();
        
                    // Toggle row visibility based on search term
                    tableRows[i].style.display = rowText.includes(searchTerm) ? 'table-row' : 'none';
                }
            }
    
            document.getElementById('searchTerm').addEventListener('input', searchBookings);
        </script>
        <footer class="footer-bottom"><!--Start of footer-->
			<center>
                <div><span>© 2023 | All Rights Reserved | Made By <a href="https://www.github.com/oleksandrmiti">Oleksandr Mitichkin</a> ©</span></div>
            </center>
		</footer><!--End of footer-->
    </body>
</html>